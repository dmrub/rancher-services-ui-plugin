(("undefined"!==typeof self?self:this)["webpackJsonpservices_ui_0_1_0"]=("undefined"!==typeof self?self:this)["webpackJsonpservices_ui_0_1_0"]||[]).push([[2],{"20ec":function(e,t,s){var n=s("5eaa");t=n(!1),t.push([e.i,".create-resource-container .subtype-banner[data-v-857324fe]{min-height:80px;padding:10px}",""]),e.exports=t},3204:function(e,t,s){e.exports=s.p+"img/gear.f142545c.svg"},"367e":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("SortableTable",{attrs:{rows:e.serviceLinks,headers:e.tableHeaders,"key-field":"id","table-actions":!1,search:!0},scopedSlots:e._u([{key:"header-middle",fn:function(){return[t("button",{staticClass:"btn btn-sm role-secondary",attrs:{type:"button",disabled:!1},on:{click:function(t){return e.toggleShowBrokenLinks()}}},[e._v(" "+e._s(e.toggleShowBrokenLinksButtonName)+" ")])]},proxy:!0},{key:"col:name",fn:function({row:s}){return[s.enabled?t("td",[t("a",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:s.enabled?void 0:e.t("services.list.na"),expression:"!row.enabled ? t('services.list.na') : undefined"}],class:{disabled:!s.enabled},attrs:{href:s.link,target:"_blank",rel:"noopener noreferrer"}},[t("div",{staticClass:"flex-right"},[e._v(" "+e._s(s.name)+" ")])])]):t("td",[t("div",{staticClass:"flex-right"},[e._v(" "+e._s(s.name)+" ")]),t("div",{staticClass:"bg-error"},[e._v(" "+e._s(s.status)+" ")])])]}}])})],1)},a=[],o=s("0fb1"),r=s("907c");const i="0.1.0";var c={name:"ServicesDashboardCard",components:{SortableTable:o["a"]},props:{resource:{type:Object,required:!0}},async fetch(){await this.fetchDeps()},data(){const e=s("3e13"),t=s("3204");return{version:i,icons:{"gpu-card":e,gear:t},externalLinks:[],showBrokenLinks:!1,tableHeaders:[{name:"namespace",label:"Namespace",value:"namespace"},{name:"name",label:"Name",value:"name"},{name:"description",label:"Description",value:"description"}]}},methods:{async fetchDeps(){const{icons:e,externalLinks:t}=this,s=this.$store.getters["currentCluster"],n=this.$store.getters["currentProduct"].inStore,a=await this.$store.dispatch(n+"/findAll",{type:r["b"]});for(const r in a){const n=a[r],l=n.metadata.name,d=n.metadata.namespace;if(void 0!==n.spec&&Array.isArray(n.spec.ports))for(const a of n.spec.ports){var o,i;if("TCP"!==a.protocol)continue;const r=null!==(o=a.name)&&void 0!==o?o:"",u=null!==(i=a.port)&&void 0!==i?i:0;if(u<=0)continue;let p=r.includes("https"),f=r.includes("http")&&!p;if(!f&&!p)switch(u){case 80:case 8080:f=!0;break;case 443:case 8443:case 6443:p=!0;break}if(!f&&!p)continue;await n.fetchPods();const h=u,v=f?"http":"https",k=f?"HTTP service on port "+u:"HTTPS service on port "+u,m=`${d}/${l}:${u}`,b=`/k8s/clusters/${s.id}/api/v1/namespaces/${d}/services/${v}:${l}:${h}/proxy`;let g=!0,w="";if(0===n.pods.length)g=!1,w="No endpoint pods";else try{const e=await this.$axios.get(b,{timeout:5e3});g=e&&200===e.status,e?200!==e.status&&(w="Could not get link, status code: "+e.status.toString()):w="Could not get link, no status code"}catch(c){g=!1,w="Could not get link: "+c.toString()}t.push({enabled:g,iconSrc:e.gear,kind:"service",namespace:d,name:l,description:k,id:m,link:b,status:w})}}},toggleShowBrokenLinks(){this.showBrokenLinks=!this.showBrokenLinks}},computed:{serviceLinks(){return this.externalLinks.filter(e=>e.enabled||this.showBrokenLinks)},toggleShowBrokenLinksButtonName(){return this.showBrokenLinks?this.t("services.list.hide-broken-links"):this.t("services.list.show-broken-links")}}},l=c,d=(s("6f06"),s("d802")),u=Object(d["a"])(l,n,a,!1,null,"857324fe",null);t["default"]=u.exports},"3e13":function(e,t,s){e.exports=s.p+"img/gpu-card.587d9839.svg"},"6c15":function(e,t,s){var n=s("20ec");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=s("0ed3").default;a("375ff22e",n,!0,{sourceMap:!1,shadowMode:!1})},"6f06":function(e,t,s){"use strict";s("6c15")},dad7:function(e,t,s){var n={"./csp/metadata.json":"7f57","./federal/metadata.json":"66fa","./rgs/metadata.json":"45d2","./suse/metadata.json":"1d5f"};function a(e){var t=o(e);return s(t)}function o(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id="dad7"}}]);
//# sourceMappingURL=services-ui-0.1.0.umd.min.2.js.map